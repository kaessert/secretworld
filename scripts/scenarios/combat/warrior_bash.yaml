# Warrior bash ability scenario - tests the Warrior's bash stun attack
# Validates that the Warrior class can use the bash ability in combat
# Uses demo mode (Warrior character) to test bash command
scenario:
  name: "Warrior Bash Ability"
  description: "Test Warrior bash ability for stunning enemies"
  seed: 42030
  config:
    max_commands: 40
    timeout: 120
    demo_mode: true  # Demo mode has a Warrior character

  setup:
    - "dump_state"  # Get initial state

  steps:
    # Step 1: Verify we're the Warrior class
    - command: "status"
      assertions:
        - type: COMMAND_VALID
          field: ""
          value: true
          message: "Status command should be valid"
        - type: NARRATIVE_MATCH
          field: "last_narrative"
          value: "Warrior"
          message: "Demo character should be Warrior class"

    # Step 2: Move to Dark Cave at [1,0]
    - command: "go east"
      assertions:
        - type: COMMAND_VALID
          field: ""
          value: true
          message: "Movement east should be valid"

    # Step 3: Verify we're at Dark Cave
    - command: "look"
      assertions:
        - type: NARRATIVE_MATCH
          field: ""
          value: "Dark Cave"
          message: "Should be at Dark Cave location"

    # Step 4: Enter the cave
    - command: "enter"
      assertions:
        - type: COMMAND_VALID
          field: ""
          value: true
          message: "Enter command should be valid"

    # Step 5: Verify we're inside
    - command: "look"
      assertions:
        - type: NARRATIVE_MATCH
          field: ""
          value: "Cave Entrance"
          message: "Should be at Cave Entrance"

    # Step 6: Move north to Dark Passage (where enemies might spawn)
    - command: "go north"
      assertions:
        - type: COMMAND_VALID
          field: ""
          value: true
          message: "Movement north should be valid"

    # Step 7: Move west to Spider Den (boss location)
    - command: "go west"
      assertions:
        - type: COMMAND_VALID
          field: ""
          value: true
          message: "Movement west should be valid"

    # Step 8: Verify we're at Spider Den
    - command: "look"
      assertions:
        - type: NARRATIVE_MATCH
          field: ""
          value: "Spider"
          message: "Should be at Spider Den with boss"

    # Step 9: Check state - combat should start with boss
    - command: "dump_state"
      assertions:
        - type: CONTENT_PRESENT
          field: "health"
          value: true
          message: "Health should be tracked"

    # Step 10: Use bash ability - core test of Warrior ability
    - command: "bash"
      assertions:
        - type: COMMAND_VALID
          field: ""
          value: true
          message: "Bash command should be recognized for Warrior"
