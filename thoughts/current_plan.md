# Implementation Plan: ASCII Art for Combat Monsters

## Feature Spec

Add ASCII art display when combat encounters begin, showing a visual representation of the enemy monster. The art should be generated by AI when the AI service is available, with fallback to simple template-based art for common enemy types.

**Behavior:**
- When `CombatEncounter.start()` is called, include ASCII art in the returned intro message
- ASCII art appears after the "A wild X appears!" text
- AI-generated art: 5-8 lines, max 40 characters wide, themed to the enemy
- Fallback art: Simple pre-defined templates for common enemy categories (beast, humanoid, undead, etc.)
- Art is stored on the Enemy model (`ascii_art: str = ""` field)
- Art generation happens during enemy spawn, not during combat start

## Implementation Steps

### 1. Add `ascii_art` field to Enemy model

**File:** `src/cli_rpg/models/enemy.py`

- Add field `ascii_art: str = ""` to Enemy dataclass (after `attack_flavor`)
- Update `to_dict()` to include `ascii_art`
- Update `from_dict()` to load `ascii_art` with default fallback

### 2. Add fallback ASCII art templates

**File:** `src/cli_rpg/combat.py`

Create function `get_fallback_ascii_art(enemy_name: str) -> str`:
- Match enemy name against categories: wolf/bear/boar → beast, skeleton/zombie/ghost → undead, goblin/bandit/thief → humanoid, spider/bat → creepy
- Return simple 5-7 line ASCII art for each category
- Default generic "monster" art if no match

### 3. Add AI ASCII art generation

**File:** `src/cli_rpg/ai_service.py`

Add method `generate_ascii_art(enemy_name: str, enemy_description: str, theme: str) -> str`:
- Build prompt requesting 5-8 line ASCII art, max 40 chars wide
- Parse response, strip any non-art text
- Return cleaned ASCII art string

**File:** `src/cli_rpg/ai_config.py`

Add `ascii_art_generation_prompt` constant and field to AIConfig dataclass.

### 4. Integrate ASCII art into enemy spawning

**File:** `src/cli_rpg/combat.py`

Modify `ai_spawn_enemy()`:
- After creating Enemy, if AI service available, call `generate_ascii_art()`
- Set `enemy.ascii_art` with result
- On AI failure, use fallback art

Modify `spawn_enemy()`:
- Set `enemy.ascii_art` using `get_fallback_ascii_art()` for template enemies

### 5. Display ASCII art in combat intro

**File:** `src/cli_rpg/combat.py`

Modify `CombatEncounter.start()`:
- After building intro message, if first enemy has `ascii_art`, append it
- Format with box/border for visual appeal

## Tests

### Test File: `tests/test_ascii_art.py`

1. **test_enemy_model_has_ascii_art_field** - Verify Enemy can store/serialize ascii_art
2. **test_get_fallback_ascii_art_beast** - Beast enemies get beast art
3. **test_get_fallback_ascii_art_undead** - Undead enemies get undead art
4. **test_get_fallback_ascii_art_default** - Unknown enemies get generic art
5. **test_combat_start_displays_ascii_art** - Combat intro includes ascii_art when present
6. **test_combat_start_no_art_when_empty** - No art block when ascii_art is empty
7. **test_spawn_enemy_sets_fallback_art** - Template spawn sets ascii_art
8. **test_ai_spawn_enemy_generates_art** - AI spawn includes generated art (mocked)
9. **test_ai_ascii_art_generation** - AIService.generate_ascii_art returns valid art (mocked)
